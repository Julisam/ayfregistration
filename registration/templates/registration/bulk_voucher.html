<!DOCTYPE html>
<html>
<head>
    <title>Bulk Voucher - Campers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @media print {
            @page { size: A4; margin: 10mm; }
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
            .container { max-width: none !important; margin: 0 !important; }
        }
        .voucher-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            width: 100%;
        }
        .voucher-card {
            border: 2px solid #000;
            border-radius: 8px;
            padding: 5px;
            background: #fff;
            page-break-inside: avoid;
            text-align: center;
            height: 135px;
        }
        .voucher-image {
            width: 140px;
            height: 90px;
            object-fit: cover;
            border-radius: 50%;
            margin: 0;
            display: block;
        }
        .voucher-text {
            text-align: left;
        }
        .camp-id {
            font-size: 10px;
            font-weight: bold;
            color: #2980b9;
            margin-bottom: 5px;
        }
        .camper-name {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="text-center no-print mb-4">
            <h3>Bulk Voucher - All Campers</h3>
            <p>Total Campers: {{ participants|length }}</p>
            <div class="mb-3">
                <label class="form-label">Attach Image (optional):</label>
                <input type="file" id="voucher-image" class="form-control" accept="image/*" style="max-width: 300px; margin: 0 auto;">
            </div>
            <button onclick="window.print()" class="btn btn-success me-2">Print Vouchers</button>
            <a href="{% url 'register' %}" class="btn btn-secondary">Back to Registration</a>
        </div>
        
        <div class="voucher-grid">
            {% for participant in participants %}
            <div class="voucher-card">
                <img class="voucher-image" id="card-image-{{ forloop.counter }}" style="display:none;" />
                <div class="voucher-text">
                    <div class="camp-id">{{ participant.camp_label }} -- {{ participant.full_name }} -- N500</div>
                    <!-- <div class="camper-name">{{ participant.full_name }}</div> -->
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center">
                <p>No campers found.</p>
            </div>
            {% endfor %}
        </div>
        
        <script>
        document.getElementById('voucher-image').onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const images = document.querySelectorAll('.voucher-image');
                    images.forEach(img => {
                        img.src = event.target.result;
                        img.style.display = 'block';
                    });
                };
                reader.readAsDataURL(file);
            }
        };
        </script>
    </div>
</body>
</html>